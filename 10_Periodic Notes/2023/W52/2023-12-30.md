---
type:
  - daily
date: 2023-12-30T18:00:13
tags:
  - TIL
  - type/timeline/daily
---
# [[2023-12-30|December 30th, 2023]]


## Title
í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì¸íŠ¸ë¡œ - Maybe(Optional)


## ğŸ¯ Daily Checklist

- [x] ì•„ì¹¨ ìš´ë™
- [x] ê°„ì‹ ì•ˆë¨¹ê¸°
- [ ] ì •ì‹œ í‡´ê·¼


## ğŸ·ï¸ Category/Tags
- #programming/fp


## ğŸ“‹ Summary
- í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ê°œë… ì •ë¦¬ ì‹œì‘
- ì²« ë²ˆì§¸ë¡œ Maybeë¥¼ Typescript ê¸°ë°˜ìœ¼ë¡œ ì •ë¦¬


## ğŸ“ Details

í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì´ ê¶ê¸ˆí•´ì„œ ì°¾ì•„ë³´ë‹¤ë³´ë©´ ì¼ë‹¨ ìš©ì–´ë¶€í„° ë‚¯ì„¤ì–´ì„œ ê±°ë¶€ê°ì´ ìƒê¸°ëŠ”ë° ì¼ë‹¨ ê·¸ëŸ° ì´ë¡ ì ì¸ ìš©ì–´ë“¤ì„ ìµœì†Œí™”í•˜ê³  ì´ë¯¸ ì•Œê³  ìˆëŠ” ê²ƒì—ì„œë¶€í„° ì‹œì‘í•˜ì—¬ ì°¨ê·¼ì°¨ê·¼ ì•Œì•„ë³´ì

### Optional(Maybe)

ê²°êµ­ ëª©ì ì€ ì–´ë– í•œ ê°’ì´ ìˆì„ ìˆ˜ë„ ìˆê³  ì—†ì„ ìˆ˜ë„ ìˆëŠ” ìƒí™©ì„ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•˜ìëŠ” ê²ƒì´ë‹¤. Javaì—ì„œ NullPointerExceptionì´ë‚˜ JSì—ì„œ uncaught reference errorì˜ ì•…ëª½ì—ì„œ ë²—ì–´ë‚˜ê¸° ìœ„í•´ ì¡°ê¸ˆ ë” ìì„¸íˆ ì•Œì•„ë³´ì.


ë¨¼ì € ìš°ë¦¬ê°€ í•„ìš”í•œ ì–´ë–¤ ê°’(value)ì„ ìƒìì— ë‹´ëŠ” ê²ƒìœ¼ë¡œ ì‹œì‘í•˜ì.

```mermaid
graph LR
	subgraph Just
	a[5]
	end
```
5ë¼ëŠ” ê°’ì„ Justë¼ëŠ” ìƒìì— ë‹´ì•˜ë‹¤.

ë§Œì•½ì— ê°’ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš°ì—” ê·¸ ìƒíƒœë¥¼ ìš°ë¦¬ëŠ” Nothingì´ë¼ëŠ” ë¹ˆ ìƒìë¼ê³  í•˜ì.
```mermaid
graph LR
	subgraph Nothing
	b["_"]
	end
```
> [!warning] â€œ0â€ ê°’ì„ ê°€ì§€ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Nullì´ë‹¤.

ê·¸ë¦¬ê³  ì´ì œ ì´ ê°’ì´ ìˆê±°ë‚˜(Just) ì—†ì„ë•Œ(Nothing)ì˜ ìƒí™©ë“¤ì„ ==Maybe== ë¼ëŠ” í° ìƒìë¡œ ê´€ë¦¬í•´ë³´ì.

ì´ê²ƒì´ Maybe(Optional)ì˜ íŠ¹ì§• ì¤‘ í•˜ë‚˜ì¸ ê°’ì˜ í¬ì¥(Wrapping Values)ì´ë‹¤.

```mermaid
graph LR
	subgraph Maybe
		direction LR
		subgraph Just
		j[5]
		end
		subgraph Nothing
		x[_]
		end
	end
	Just ~~~ Nothing
```

> [!note]
> Wrapping Values 
> - Valueë¥¼ Wrappingí•˜ê³ , valueê°€ ì—†ì„ ê²½ìš° nullì´ ì•„ë‹ˆë¼ ë¹„ì–´ìˆëŠ” ìƒì(Nothing)ë¥¼ ì°¸ì¡°í•˜ì—¬ Null-safeí•œ ì‘ì—… ê°€ëŠ¥


ì´ì œ ì´ Maybeë¥¼ ê°€ì§€ê³  ì—°ì‚°ì„ í•´ë³´ì.

```mermaid
graph LR
	subgraph m1[Maybe]
		direction LR
		subgraph Just
		j[5]
		end
		subgraph Nothing
		x[_]
		end
	end
	Just ~~~ Nothing
	subgraph m2[Maybe]
		direction LR
		subgraph Just2[Just]
		j2[7]
		end
		subgraph Empty2[Nothing]
		x2[_]
		end
	end
	Just2 ~~~ Empty2
	m1 -- "add 2" --> m2
```

Maybe ìƒìì— add 2 ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì ìš©í•´ ìƒˆë¡œìš´ Maybe ìƒìë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤.

ìƒìì•ˆì— ê°’ì´ ìˆë‹¤ë©´ ê·¸ ê°’ì— add 2 í•¨ìˆ˜ê°€ ì ìš©ëœ ê°’ì´ ë“¤ì–´ìˆê³  Nothing boxë¼ë©´ ì—°ì‚° ì´í›„ì—ë„ ì—¬ì „íˆ Nothing boxì…ë‹ˆë‹¤.

Null check ì½”ë“œë¥¼ ì§‘ì–´ë„£ì§€ ì•Šê³  Maybeë¡œ ê°’ì„ ê°ì‹¸ í•„ìš”í•œ ì—°ì‚°ì„ ì¼ê´€ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê°œë…ì ì¸ ë¶€ë¶„ì€ ì—¬ê¸°ê¹Œì§€ ì•Œì•„ë³´ê³  ì´ì œ codeë¡œ ë§Œë“¤ì–´ë³´ì.

### Typescriptë¡œ Maybe ë§Œë“¤ì–´ë³´ê¸°

```ts
abstract class Maybe<T> {
	abstract bind<U>(func: (value: T) => Maybe<U>): Maybe<U>;
}
```

Maybeë¼ëŠ” ì¶”ìƒí´ë˜ìŠ¤ì— ì¶”ìƒë©”ì†Œë“œì¸ bindë¥¼ ê°€ì§€ê³ ìˆë‹¤.
bindëŠ” í•¨ìˆ˜ë¥¼ ë°›ì•„ì„œ í˜„ì¬ Maybeì— í•´ë‹¹ í•¨ìˆ˜ê°€ ì ìš© ëœ ìƒˆë¡œìš´ Maybeë¥¼ return í•œë‹¤.

ê·¸ëŸ¼ ì´ Maybeë¥¼ êµ¬í˜„í•œ Justì™€ Nothing classë„ ë§Œë“¤ì–´ë³´ì.

```ts
class Just<T> extends Maybe<T> {

	constructor(private value: T) {
		super();
	}

	bind<U>(func: (value: T) => Maybe<U>): Maybe<U> {
		return func(this.value);
	}
}
```

JustëŠ” ==value==ë¼ëŠ” private í”„ë¡œí¼í‹°ë¥¼ ê°€ì§€ê³  ==bind==ëŠ” valueì— ì¸ìë¡œ ë°›ì€ funcë¥¼ ì ìš©í•œ ë’¤ ìƒˆë¡œìš´ Maybeë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.

Nothingì€ ë” ê°„ë‹¨í•©ë‹ˆë‹¤.
```ts
class Nothing<T> extends Maybe<T> {

	bind<U>(func: (value: T) => Maybe<U>): Maybe<U> {
		return new Nothing<U>();
	} 
}
```

ë¹„ì–´ìˆëŠ” ìƒìë‹ˆê¹Œ ë‹¹ì—°íˆ valueëŠ” ì—†ê³  bindëŠ” í•­ìƒ ìƒˆë¡œìš´ Nothingì„ ë¦¬í„´í•©ë‹ˆë‹¤. 

ê·¸ëŸ¼ ì´ì œ bindì— ì‹¤ì œ í•¨ìˆ˜ë¥¼ ë„£ì–´ë´…ì‹œë‹¤.

ì¼ë‹¨ ìœ„ì˜ ì˜ˆì‹œì—ì„œ ì‚¬ìš©í•œ add 2ë¥¼ ë„£ì–´ë³´ì£ .

ê·¸ì „ì— Maybeë¥¼ ì‰½ê²Œ ë§Œë“¤ê¸° ìœ„í•´ static methodë¥¼ í•˜ë‚˜ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤.

```ts
abstract class Maybe<T> {
	abstract bind<U>(func: (value: T) => Maybe<U>): Maybe<U>;

	static of<T>(value: T | undefined | null): Maybe<T> {
		return (value === undefined || value === null)
			? new Nothing() : new Just(value);
	}
}
```

ê·¸ë¦¬ê³  add 2ë¥¼ ë§Œë“¤ê³ 
```ts
const add2 = (value: number) => Maybe.of(value + 2);
```

Maybe instanceì— bindë¥¼ ì ìš©í•©ì‹œë‹¤.

```ts
const maybeNumber = Maybe.of<number>(5);

const addedNumber = maybeNumber.bind(add2);

console.log(addedNumber); // Just: { "value": 7 }
```

Nothingì¸ ê²½ìš°ë„ ì‚´í´ë´…ì‹œë‹¤.
```ts
const maybeNumber = Maybe.of<number>(null);

const addedNumber = maybeNumber.bind(add2);

console.log(addedNumber); // Nothing: {}
```

í•œë²ˆë§Œ í•˜ë©´ ì•„ì‰¬ìš°ë‹ˆê¹Œ 2ê°œì˜ í•¨ìˆ˜ë¥¼ bind ì‹œì¼œë´…ì‹œë‹¤.
```ts
const add2   = (value: number) => Maybe.of(value + 2);
const double = (value: number) => Maybe.of(value * 2);

const five_add2_and_double = Maybe.of<number>(5).bind(add2).bind(double);
const null_add2_and_double = Maybe.of<number>(null).bind(add2).bind(double);

console.log(five_add2_and_double); // Just: { "value": 14 }
console.log(null_add2_and_double); // Nothing: {}
```


### ìƒìì—ì„œ êº¼ë‚´ê¸°

Maybe ë°•ìŠ¤ì— ê°’ì„ ë„£ê³  ì—¬ëŸ¬ ì—°ì‚°ì„ binding í•œ ë’¤ ê²°êµ­ì—” ê·¸ ê°’ì„ êº¼ë‚´ì•¼ë˜ê² ì£ ? ìš°ì„  Maybeì— ê°’ì„ êº¼ë‚´ëŠ” ==match== í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

```ts
abstract class Maybe<T> {

	abstract bind<U>(func: (value: T) => Maybe<U>): Maybe<U>;
	
	abstract match<R1, R2>(
		ifJust: (value: T) => R1,
		ifNothing: () => R2,
	): R1 | R2
	
/// ìƒëµ
}
```


ê·¸ë¦¬ê³  Justì™€ Nothingì— matchë¥¼ êµ¬í˜„í•˜ëŸ¬ ê°€ë³´ì£ 
```ts
class Just<T> extends Maybe<T> {
	// ìƒëµ
	match<R1, R2>(ifJust: (value: T) => R1, ifNothing: () => R2): R1 | R2 {
		return ifJust(this.value);
	}
}
```

```ts
class Nothing<T> extends Maybe<T> {
	// ìƒëµ
	match<R1, R2>(ifJust: (value: T) => R1, ifNothing: () => R2): R1 | R2 {
		return ifNothing();
	}
}
```

ë§Œì•½ Maybeì— valueê°€ ì¡´ì¬í•œë‹¤ë©´ ==ifJust== ê°€ ìˆ˜í–‰ë  ê²ƒì´ê³ , ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ==ifNothing==ì´ ìˆ˜í–‰ë  ê²ƒì…ë‹ˆë‹¤.
==match==ë¥¼ í†µí•´ ë¦¬í„´ë˜ëŠ” ê°’ì€ ifJustë‚˜ ifNothingì´ ë¬´ì—‡ì„ ë¦¬í„´í•˜ëŠ”ì§€ì— ë”°ë¼ ê²°ì • ë  ê²ƒì…ë‹ˆë‹¤.

ê·¸ëŸ¼ ê°’ì„ êº¼ë‚´ë³´ì£ 
```ts
const printValue = (value: number) => console.log(`value is ${value}`);

const printNothingMsg = () => console.log('There is no value');
```
ë§Œì•½ ê°’ì´ ìˆë‹¤ë©´ valueë¥¼ ì¶œë ¥í•˜ê³  ì—†ë‹¤ë©´ ì—†ë‹¤ëŠ” ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•˜ê¸°ë¡œ í•©ì‹œë‹¤.

```ts
const five_add2_and_double = Maybe.of<number>(5).bind(add2).bind(double);

const null_add2_and_double = Maybe.of<number>(null).bind(add2).bind(double);

five_add2_and_double.match(printValue, printNothingMsg); // "value is 14"

null_add2_and_double.match(printValue, printNothingMsg); // "There is no value"
```

Javaë¥¼ ì¨ë³´ì…¨ë‹¤ë©´ Optionalì´ ë°”ë¡œ ì´ê²ƒì´ê³  Javascriptì—ì„œëŠ” Optional Chainingì´ ì´ì™€ ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ í•©ë‹ˆë‹¤.



## ğŸ”— Links/References
- [Monads in Typescript](https://betterprogramming.pub/monads-in-typescript-2b5e059b6d74)
- [Typescript Playground](https://www.typescriptlang.org/play?#code/PTAEFkEME8CMFMBQlYGcAuAnSBjdocAbSVVCGBAHgBUA+UAb0QEgUNs9RYBLAOwBNKAVVoAKAGYBXXjgBcoUQDdIhSfHnUAlKAC89KHHjDam+QaoiA3IkSg7oNllz4AtpHQ4AFpQBKARgAaUB8AJjFbe0jucQApSQx5JRU1DW09YMCIyLtogDkAe3RPPgBzRLT6UICs0FMM0AAfYJCbFgx3bhxQfPEaMWVVdVBqRtBpfnhxPnh+Ud5JQkI68yM6RhZmTHh0SUxeBQG1XR0dMYFJ6dmGpsP4Y9P5xc0N5gB+UF54AHdQAqLS0TaeSfH5xDBJQaaazMAC+iDhiBAoDB6EQRBIZBRfVA8AAHuh4AIyCtsUxmDh8rx2JI8PlMKIAA6YbjKAmgW6pdbMZioSQM+D0qEsBHMHgCYwSaRyA7JIZaXT6ChGETLJXGLmbba7fZSGSif6oAB0tyFsJskTcHm8-iCoTE0RRiQ5wwqGSCeUKxV4ZQUrtCdX8o1C62y9i2Oz2oAd8XQ+uKRpN1kicIRSL+XpKaOIpF+ntK2LxBKJ5EMpJYYsEIklMidss56RJKrMapEGvD2o+31z-29EtNMNA5vslq8vkCzXtsRjtcG9cq449PZ9gIVzQDfiDIRDodA7cji4zgKT9hTrTTkhcCEwoAAEpABIRSmjKRgHPx+Fu7KcISkPher66KyGj0P53AA1KAIRQoOFJUvg-D5JIsCEHc37OvMl4CoBSrAeIoGgAAVJBQrPnBoBuIYuT-gKG6nEBPSUBhV5iAArEKsGvpA74zFRmGYLR5FKrxV5+IaFaiFxH7sS++QoYahD5CUEncfwwk0dBSKOowoAAES3Dp8gAOygAONgca4QnUZgW50ThDFMQKYiPEs1jmW+EyqVZNmCZRXliXw-DKVJrkyXJClKZJPFeRpYDpqU8gMKZpGvlMijwAA+pJISZQI6UIUhKG6CWCC4YxVmsZo-kCEFUFVYF+XIfA0lkc5mXvtl978HliGNUV9G9A5mBOQsSx1TVlXiQ1KHNagsnwPJikSCyGVZTlXVTU1ligJp07aXpsoGaAfgACwmTBoXzeFoitatnXdQVm3bbFebeglSVuUyfDoAAarKRWgfI97QK6HFzQtSkAAa3FGZAACQMLcMIQzN+Cfbw6Bxd64CoCU-0gxd4OiAA5NQngCnc3BkLw+TsrKRMkalK3tWt92NYaI6eIyzLo79gxBGjGMvSU2MlDFunQ5TR3HTpg43czd0bez7heFzX282o-Pc4LS4i2LOmk+TMMfDT+mDoiYAAMpYKUt6dY+3rJfgJTbBb8CwfwAAy2wEteaF1qA7ClNhhi4aBhpeJAmAAIKxn4mgo6A6D5EIDL8pgADCJB3JEfuzgH1vesHJUgbchpJynaeZ6g8CAiRbkTOIkALOg6WB96fV2b0bclGIRMN03hDoPTIUtSN6XQznxXzQx3fDU8I+vvALgMug0CtwXuNflPpWz8Tw82P3zfr9zmbMGNzvoK77te+gPvPGf4nl6nApV01LBK1aqs87KmtfZjws4z1hLMgABRGWNhWq3HfuJC+V9KSe29lhaBAV9TJ2fhnLO98P4qwFureAv90b-11ltJE+syZbCNtTWmgxwGICXivNe3dkHVVgW7eBN877MMCk-SumD34cy-j9H+oABZEMASQsA+1BhGxlkAA)


```dataview
LIST
FROM #type/timeline/daily
WHERE week = [[2023-W52]]
```

---

## ğŸ“‡ Additional Metadata
- ğŸ—‚ Type:: #type/timeline/daily 
- ğŸ—“ï¸ Week:: [[2023-W52]]
